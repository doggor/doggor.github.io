<!doctype html>
<html lang="zh-TW">

<head>
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} // {{ .Site.Title }}{{ end }}</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo {{ .Hugo.Version }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="{{ .Site.Params.author }}" />
    <meta name="description" content="{{ if .IsHome }}{{ .Site.Params.description }}{{ else if .Summary }}{{ .Summary }}{{ else }}{{ .Description }}{{ end }}" />
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="{{ .Site.Title }}">
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">
    <meta name="theme-color" content="#16191d" />
    {{ $thumbnail := .Resources.GetMatch "thumbnail.*" }}
    {{ if $thumbnail }}
    <meta property="og:image" content="{{ .Site.BaseURL }}{{ $thumbnail.RelPermalink }}">
    {{ end }}
    {{ range .Params.tags }}
    <meta property="og:tags" content="{{ . }}">
    {{ end }}
    <base href="{{ .Site.BaseURL }}" />
    {{ $style := resources.Get "css/main.scss" | resources.ExecuteAsTemplate "css/main.scss" . | toCSS | minify | fingerprint "md5" -}}
    <link rel="stylesheet" href="{{ $style.Permalink }}" />
    {{ $cookies := resources.Get "js/cookies-consent.js" | minify | fingerprint "md5" }}
    <script src="{{ $cookies.Permalink }}" defer></script>
    {{ $serviceworker := resources.Get "service-worker.js" | minify }}
    <!-- worker to load: {{ $serviceworker.Permalink }} -->
    {{ $serviceworkerloader := resources.Get "js/service-worker-loader.js" | minify }}
    <script src="{{ $serviceworkerloader.Permalink }}" defer></script>
</head>

<body>
    <header class="app-header">
        <a href="/" aria-label="Home">
            {{ $avatar := resources.Get "img/avatar.jpg" }}
            {{ $avatar1x := $avatar.Fill "240x240" }}
            {{ $avatar2x := $avatar.Fill "460x460" }}
            <img class="app-header-avatar" src="{{ $avatar1x.RelPermalink }}" srcset="{{ $avatar1x.RelPermalink }}, {{ $avatar2x.RelPermalink }} 2x" width="240" height="240" alt="">
        </a>
        <a href="/" aria-label="Home"><h1>{{ .Site.Title }}</h1></a>
        <p>{{ .Site.Params.description }}</p>

        {{ if .Site.Taxonomies.tags }}
        <div class="app-header-tag-group">
        {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
        {{ $termLink := printf "/tags/%s/" $name | urlize }}
        <a class="tag-btn" href="{{ $termLink }}" aria-label="tag:{{ $name }}">
            <span>{{ $name }}</span>
        </a>
        {{ end }}
        </div>
        {{ end }}

        <div class="app-header-links">
            <a class="tag-link" href="/categories" aria-label="Categories">{{ partial "icon.html" (dict "ctx" $ "name" "folder") }}</a>
            <a class="tag-link" href="/tags" aria-label="Tags">{{ partial "icon.html" (dict "ctx" $ "name" "tag") }}</a>
            {{ range .Site.Params.social }}
            <a target="_blank" href="{{ .url }}" rel="noopener" aria-label="Github">{{ partial "icon.html" (dict "ctx" $ "name" .name ) }}</a>
            {{ end }}
        </div>
    </header>
    <main class="app-container">
        {{ block "main" . }}
        {{ .Content }}
        {{ end }}
    </main>
</body>

</html>
